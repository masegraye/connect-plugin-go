// Code generated by protoc-gen-connect-plugin. DO NOT EDIT.

// source: capability/logger/v1/logger.proto

package loggerv1plugin

import (
	"fmt"
	"net/http"

	"connectrpc.com/connect"
	connectplugin "github.com/masegraye/connect-plugin-go"
	loggerv1connect "github.com/masegraye/connect-plugin-go/gen/capability/logger/v1/loggerv1connect"
)

// LoggerPlugin implements connectplugin.Plugin for Logger.
type LoggerPlugin struct{}

var _ connectplugin.Plugin = (*LoggerPlugin)(nil)

// Metadata returns plugin metadata.
func (p *LoggerPlugin) Metadata() connectplugin.PluginMetadata {
	return connectplugin.PluginMetadata{
		Name:    "logger",
		Path:    loggerv1connect.LoggerName,
		Version: "1.0.0",
		Provides: []connectplugin.ServiceDeclaration{
			{
				Type:    "logger",
				Version: "1.0.0",
				Path:    loggerv1connect.LoggerName,
			},
		},
	}
}

// ConnectServer creates a server-side handler for this plugin.
func (p *LoggerPlugin) ConnectServer(impl any) (string, http.Handler, error) {
	handler, ok := impl.(loggerv1connect.LoggerHandler)
	if !ok {
		return "", nil, fmt.Errorf("impl must implement LoggerHandler, got %T", impl)
	}

	path, h := loggerv1connect.NewLoggerHandler(handler)
	return path, h, nil
}

// ConnectClient creates a client-side plugin instance.
func (p *LoggerPlugin) ConnectClient(baseURL string, httpClient connect.HTTPClient) (any, error) {
	return loggerv1connect.NewLoggerClient(httpClient, baseURL), nil
}
